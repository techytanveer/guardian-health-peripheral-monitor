#include <iostream>
#include <csignal>
#include <atomic>
#include <thread>
#include <chrono>

// Atomic flag for graceful shutdown
std::atomic<bool> running{true};

void signal_handler(int signal) {
    if (signal == SIGTERM || signal == SIGINT) {
        running = false;
    }
}

int main() {
    // Register signal handlers for systemd compatibility
    std::signal(SIGINT, signal_handler);
    std::signal(SIGTERM, signal_handler);

    std::cout << "Guardian Service Started [Version 1.0.0]" << std::endl;
    
    while (running) {
        // This is where your I2C/Health Check logic will go
        std::cout << "[INFO] Monitoring system health..." << std::endl;
        
        // Simulate work interval
        std::this_thread::sleep_for(std::chrono::seconds(5));
    }

    std::cout << "Guardian Service Shutting Down Cleanly..." << std::endl;
    return 0;
}
